function drawBox(e,t,n,r,i){boxes[e]={box1:{},box2:{},corners:[[r+padding,i+padding],[r+boxSize-innerSize-padding,i+padding],[r+boxSize-innerSize-padding,i+boxSize-innerSize-padding],[r+padding,i+boxSize-innerSize-padding]]};boxes[e].box1={x:boxes[e].corners[0][0],y:boxes[e].corners[0][1]};boxes[e].box2={x:boxes[e].corners[2][0],y:boxes[e].corners[2][1]};setInterval(function(){ctx.fillStyle=t?black:white;ctx.fillRect(r,i,boxSize,boxSize);if(n){ctx.fillStyle=t?white:black;moveInnerBox(e,"box1",innerSize);moveInnerBox(e,"box2",innerSize)}},updateFreqency)}function moveInnerBox(e,t,n){var r=boxes[e],i=r[t].x,s=r[t].y,o=r.corners;ctx.fillRect(i,s,n,n);if(debug){ctx.font="13px";for(var u=0;u<o.length;u++)ctx.fillText(o[u][0]+", "+o[u][1],o[u][0],o[u][1]);ctx.fillStyle=isOdd?black:white;ctx.fillText("x: "+i,i+5,s+15);ctx.fillText("y: "+s,i+5,s+25)}i>=o[0][0]&&i<o[1][0]&&s==o[0][1]?r[t].x++:s>=o[1][1]&&s<o[2][1]&&i==o[1][0]?r[t].y++:i<=o[2][0]&&i>o[3][0]?r[t].x--:s<=o[3][1]&&s>o[0][1]&&r[t].y--}function drawCheckerboard(){canvas.width=containerSize;canvas.height=containerSize;var e=(gridCount-1)/2,t=gridCount*gridCount,n=0,r=0;for(var i=0;i<t;i++){if(i%gridCount===0){n++;r=0}drawBox(i,i%2===0,n-1!==e||r!==e,Math.round(boxSize*r),Math.round(boxSize*(n-1)),boxSize);r++}}var canvas=document.getElementById("draw"),ctx=canvas.getContext("2d"),debug=!1,boxes=[],white="#FFF",black="#000",ratio=.25,updateFreqency=10,containerSize=550,gridCount=9,boxSize=Math.round(containerSize/gridCount),innerSize=Math.round(boxSize*ratio),padding=Math.round(innerSize*ratio);drawCheckerboard();