function drawBox(e,t,n,r,i,s){var o="#FFF",u="#000",a=.25,f=Math.round(s*a),l=Math.round(f*a);boxes[e]={box1:{},box2:{},corners:[[r+l,i+l],[r+s-f-l,i+l],[r+s-f-l,i+s-f-l],[r+l,i+s-f-l]]};boxes[e].box1={x:boxes[e].corners[0][0],y:boxes[e].corners[0][1]};boxes[e].box2={x:boxes[e].corners[2][0],y:boxes[e].corners[2][1]};setInterval(function(){ctx.fillStyle=t?u:o;ctx.fillRect(r,i,s,s);if(n){ctx.fillStyle=t?o:u;moveBox(e,"box1",f);moveBox(e,"box2",f)}},10)}function moveBox(e,t,n){var r=boxes[e],i=r[t].x,s=r[t].y,o=r.corners;ctx.fillRect(i,s,n,n);if(debug){ctx.font="13px";for(var u=0;u<o.length;u++)ctx.fillText(o[u][0]+", "+o[u][1],o[u][0],o[u][1]);ctx.fillStyle=isOdd?black:white;ctx.fillText("x: "+i,i+5,s+15);ctx.fillText("y: "+s,i+5,s+25)}i>=o[0][0]&&i<o[1][0]&&s==o[0][1]?r[t].x++:s>=o[1][1]&&s<o[2][1]&&i==o[1][0]?r[t].y++:i<=o[2][0]&&i>o[3][0]?r[t].x--:s<=o[3][1]&&s>o[0][1]&&r[t].y--}function drawCheckerboard(e,t){canvas.width=e;canvas.height=e;var n=(t-1)/2,r=Math.round(e/t),i=t*t,s=0,o=0;for(var u=0;u<i;u++){if(u%t===0){s++;o=0}drawBox(u,u%2===0,s-1!==n||o!==n,Math.round(r*o),Math.round(r*(s-1)),r);o++}}var canvas=document.getElementById("draw"),ctx=canvas.getContext("2d"),debug=!1,boxes=[];console.clear();drawCheckerboard(550,9);